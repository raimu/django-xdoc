{% extends 'xdoc/base.html' %}


{% block javacscipt %}
<script type="text/javascript">
    $(document).ready(function(){
        $("#tree").treeview({
            url: "{% url 'tree' %}"
        })

        $('#tree').contextMenu({
            selector: 'li',
            callback: function(key, options) {
                var m = "clicked: " + key + " on " + $(this).text();
                window.console && console.log(m) || alert(m);
                console.log($(this).attr('id'));
            },
            items: {
                "edit": {name: "Edit", icon: "edit"},
                "delete": {name: "Delete", icon: "delete"}
            }
        });

        var table = $('#table').dataTable( {
            "bProcessing": true,
            "bServerSide": true,
            "sAjaxSource": "{% url 'table' %}",
            "fnDrawCallback": function () {
                $(".iframe").fancybox({
                    maxWidth: 1200,
                    maxHeight: 800,
                    fitToView: false,
                    width: '70%',
                    height: '70%',
                    autoSize: true,
                    closeClick: false,
                    closeBtn: true,
                    openEffect: 'elastic',
                    closeEffect: 'elastic',
                    afterClose: function(){
                        table.fnDraw(false);
                    }
                });
            }
        });
    });
</script>
{% endblock %}

{% block content %}

    <div class="navbar navbar-inverse">
      <div class="navbar-inner">
        <div class="container-fluid">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="#">Project name</a>
          <div class="nav-collapse collapse">
            <p class="navbar-text pull-right">
              Logged in as <a href="#" class="navbar-link">Username</a>
            </p>
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="well sidebar-nav">
                <ul class="nav nav-list filetree" id="tree">
                </ul>
          </div><!--/.well -->
        </div><!--/span-->
        <div class="span9">
            <table cellpadding="0" cellspacing="0" border="0" class="display" id="table">
                <thead>
                    <tr>
                        <th>id</th>
                        <th>name</th>
                        <th>date</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="5" class="dataTables_empty">Loading data from server</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <th>id</th>
                        <th>name</th>
                        <th>date</th>
                        <th></th>
                    </tr>
                </tfoot>
            </table>
        </div><!--/span-->
      </div><!--/row-->

      <hr>

      <footer>
        <p>&copy; Company 2013</p>
      </footer>

    </div><!--/.fluid-container-->

</div>

<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" style="height: 80%; width: 90%; left: 5%; margin: 0;">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Modal header</h3>
    </div>
    <div class="modal-body" style="height: 75%">
    </div>
</div>

{% endblock %}