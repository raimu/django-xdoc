{% extends 'xdoc/base.html' %}

{% block css_area %}
<link rel="stylesheet" href="{{ STATIC_URL }}xdoc/lib/jquery.treeview/jquery.treeview.css" />
<link rel="stylesheet" href="{{ STATIC_URL }}xdoc/lib/jquery-ui-1.10.3/themes/base/jquery-ui.css" />
<link rel="stylesheet" href="{{ STATIC_URL }}xdoc/lib/jQuery-contextMenu-master/src/jquery.contextMenu.css" />
<link rel="stylesheet" href="{{ STATIC_URL }}xdoc/lib/DataTables-1.9.4/media/css/jquery.dataTables.css" />
<link rel="stylesheet" href="{{ STATIC_URL }}xdoc/lib/colorbox/example3/colorbox.css" />
<style>
#cboxLoadedContent{
    padding: 10px 5px;
}
</style>
{% endblock %}


{% block javacscipt_area %}
<script src="{{ STATIC_URL }}xdoc/lib/jquery.cookie.js"></script>
<script src="{{ STATIC_URL }}xdoc/lib/jquery-ui-1.10.3/ui/minified/jquery-ui.min.js"></script>
<script src="{{ STATIC_URL }}xdoc/lib/bootstrap/js/bootstrap.min.js"></script>
<script src="{{ STATIC_URL }}xdoc/lib/jquery.treeview/jquery.treeview.js"></script>
<script src="{{ STATIC_URL }}xdoc/lib/jquery.treeview/jquery.treeview.edit.js"></script>
<script src="{{ STATIC_URL }}xdoc/lib/jquery.treeview/jquery.treeview.async.js"></script>
<script src="{{ STATIC_URL }}xdoc/lib/jQuery-contextMenu-master/src/jquery.contextMenu.js"></script>
<script src="{{ STATIC_URL }}xdoc/lib/jQuery-contextMenu-master/src/jquery.ui.position.js"></script>
<script src="{{ STATIC_URL }}xdoc/lib/DataTables-1.9.4/media/js/jquery.dataTables.min.js"></script>
<script src="{{ STATIC_URL }}xdoc/lib/colorbox/jquery.colorbox-min.js"></script>

<script type="text/javascript">
    $(document).ready(function(){
        $("#tree").treeview({
            url: "{% url 'tree' %}"
        })

        $('#tree').contextMenu({
            selector: 'li',
            callback: function(key, options) {
                var m = "clicked: " + key + " on " + $(this).text();
                window.console && console.log(m) || alert(m);
                console.log($(this).attr('id'));
            },
            items: {
                "edit": {name: "Edit", icon: "edit"},
                "delete": {name: "Delete", icon: "delete"}
            }
        });

        init_modal();

        table = $('#table').dataTable( {
            "bProcessing": true,
            "bServerSide": true,
            "sAjaxSource": "{% url 'table' %}",
            "fnDrawCallback": init_modal
        });
    });

    function init_modal() {
        $('.iframe').colorbox({
            transition: 'elastic',
            iframe:true,
            width:"80%",
            height:"80%",
            onClosed: function(){
                table.fnDraw(false);
            }
        });
    }
</script>
{% endblock %}

{% block content %}

    <a href="https://github.com/raimu/django-xdoc"><img style="position: absolute; top: 0; right: 0; border: 0; width: 120px; z-index: 999;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>

    <div class="navbar navbar-inverse">
      <div class="navbar-inner">
        <div class="container-fluid">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="#">Project name</a>
          <div class="nav-collapse collapse">
            <p class="navbar-text pull-right" style="margin-right: 75px;">
              Logged in as <a href="#" class="navbar-link">Username</a>
            </p>
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
              <li>
                  <a href="{% url 'edit' %}" class="iframe fancybox.iframe">
                      <i class="icon-plus icon-white"></i>
                  </a>
              </li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="well sidebar-nav">
                <ul class="nav nav-list filetree" id="tree">
                </ul>
          </div><!--/.well -->
        </div><!--/span-->
        <div class="span9">
            <table cellpadding="0" cellspacing="0" border="0" class="display" id="table">
                <thead>
                    <tr>
                        <th>id</th>
                        <th>name</th>
                        <th>date</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="5" class="dataTables_empty">Loading data from server</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <th>id</th>
                        <th>name</th>
                        <th>date</th>
                        <th></th>
                    </tr>
                </tfoot>
            </table>
        </div><!--/span-->
      </div><!--/row-->

      <hr>

      <footer>
        <p>&copy; Company 2013</p>
      </footer>

    </div><!--/.fluid-container-->

</div>

<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" style="height: 80%; width: 90%; left: 5%; margin: 0;">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Modal header</h3>
    </div>
    <div class="modal-body" style="height: 75%">
    </div>
</div>

{% endblock %}